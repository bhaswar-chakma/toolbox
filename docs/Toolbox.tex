% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{book}
\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={Toolbox},
  pdfauthor={Bhaswar Chakma},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\usepackage{booktabs}
\usepackage{amsthm}
\makeatletter
\def\thm@space@setup{%
  \thm@preskip=8pt plus 2pt minus 4pt
  \thm@postskip=\thm@preskip
}
\makeatother
\ifluatex
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\usepackage[]{natbib}
\bibliographystyle{apalike}

\title{Toolbox}
\author{Bhaswar Chakma}
\date{2021-07-13}

\begin{document}
\maketitle

{
\setcounter{tocdepth}{1}
\tableofcontents
}
\hypertarget{section}{%
\chapter*{}\label{section}}
\addcontentsline{toc}{chapter}{}

\hypertarget{dplyr-vs-pandas}{%
\chapter{dplyr vs pandas}\label{dplyr-vs-pandas}}

We will use the five \href{https://dplyr.tidyverse.org/}{dplyr verbs} for comparison

\begin{itemize}
\item
  \texttt{select()} picks variables based on their names.
\item
  \texttt{mutate()} adds new variables that are functions of existing variables
\item
  \texttt{filter()} picks cases based on their values.
\item
  \texttt{summarise()} reduces multiple values down to a single summary.
\item
  \texttt{arrange()} changes the ordering of the rows.
\end{itemize}

and use the following toy data to apply the verbs.

\begin{tabular}{l|l|r}
\hline
name & gender & grade\\
\hline
Barney & Male & 10\\
\hline
Ted & Male & 11\\
\hline
Marshall & Male & 13\\
\hline
Lilly & Female & 12\\
\hline
Robin & Female & 14\\
\hline
\end{tabular}

{\textbf{Create Toy Data}}

dplyr

pandas

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}
  \AttributeTok{name =} \FunctionTok{c}\NormalTok{(}\StringTok{"Barney"}\NormalTok{, }\StringTok{"Ted"}\NormalTok{, }\StringTok{"Marshall"}\NormalTok{,}
           \StringTok{"Lilly"}\NormalTok{,}\StringTok{"Robin"}\NormalTok{),}
  \AttributeTok{gender =} \FunctionTok{c}\NormalTok{(}\StringTok{"Male"}\NormalTok{, }\StringTok{"Male"}\NormalTok{,}\StringTok{"Male"}\NormalTok{,}
             \StringTok{"Female"}\NormalTok{, }\StringTok{"Female"}\NormalTok{),}
  \AttributeTok{grade =} \FunctionTok{c}\NormalTok{(}\DecValTok{10}\NormalTok{, }\DecValTok{11}\NormalTok{, }\DecValTok{13}\NormalTok{, }\DecValTok{12}\NormalTok{, }\DecValTok{14}\NormalTok{)}
\NormalTok{)}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 3
##   name     gender grade
##   <chr>    <chr>  <dbl>
## 1 Barney   Male      10
## 2 Ted      Male      11
## 3 Marshall Male      13
## 4 Lilly    Female    12
## 5 Robin    Female    14
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{=}\NormalTok{ pd.DataFrame(\{}
  \StringTok{\textquotesingle{}name\textquotesingle{}}\NormalTok{:[}\StringTok{"Barney"}\NormalTok{, }\StringTok{"Ted"}\NormalTok{, }\StringTok{"Marshall"}\NormalTok{,}
          \StringTok{"Lilly"}\NormalTok{, }\StringTok{"Robin"}\NormalTok{],}
  \StringTok{\textquotesingle{}gender\textquotesingle{}}\NormalTok{:[}\StringTok{"Male"}\NormalTok{, }\StringTok{"Male"}\NormalTok{,}\StringTok{"Male"}\NormalTok{, }
            \StringTok{"Female"}\NormalTok{, }\StringTok{"Female"}\NormalTok{],}
  \StringTok{\textquotesingle{}grade\textquotesingle{}}\NormalTok{:[}\DecValTok{10}\NormalTok{, }\DecValTok{11}\NormalTok{, }\DecValTok{13}\NormalTok{, }\DecValTok{12}\NormalTok{, }\DecValTok{14}\NormalTok{] }
\NormalTok{\})}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##        name  gender  grade
## 0    Barney    Male     10
## 1       Ted    Male     11
## 2  Marshall    Male     13
## 3     Lilly  Female     12
## 4     Robin  Female     14
\end{verbatim}

{\textbf{Check Data Structure}}

dplyr

pandas

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{glimpse}\NormalTok{(df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 5
## Columns: 3
## $ name   <chr> "Barney", "Ted", "Marshall", "Lilly", "Robin"
## $ gender <chr> "Male", "Male", "Male", "Female", "Female"
## $ grade  <dbl> 10, 11, 13, 12, 14
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df.dtypes}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## name      object
## gender    object
## grade      int64
## dtype: object
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df.shape}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## (5, 3)
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df.info()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## <class 'pandas.core.frame.DataFrame'>
## RangeIndex: 5 entries, 0 to 4
## Data columns (total 3 columns):
## name      5 non-null object
## gender    5 non-null object
## grade     5 non-null int64
## dtypes: int64(1), object(2)
## memory usage: 248.0+ bytes
\end{verbatim}

\hypertarget{select}{%
\section{select()}\label{select}}

{\textbf{Task: Pick the variables \texttt{name} and \texttt{grade}.
}}

dplyr

pandas

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{select}\NormalTok{(name, grade)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 2
##   name     grade
##   <chr>    <dbl>
## 1 Barney      10
## 2 Ted         11
## 3 Marshall    13
## 4 Lilly       12
## 5 Robin       14
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df[[}\StringTok{\textquotesingle{}name\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}grade\textquotesingle{}}\NormalTok{]]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##        name  grade
## 0    Barney     10
## 1       Ted     11
## 2  Marshall     13
## 3     Lilly     12
## 4     Robin     14
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# or}
\NormalTok{df.drop(columns }\OperatorTok{=}\NormalTok{ [}\StringTok{\textquotesingle{}grade\textquotesingle{}}\NormalTok{])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##        name  gender
## 0    Barney    Male
## 1       Ted    Male
## 2  Marshall    Male
## 3     Lilly  Female
## 4     Robin  Female
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# or}
\NormalTok{df.drop([}\StringTok{\textquotesingle{}grade\textquotesingle{}}\NormalTok{], axis }\OperatorTok{=} \DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##        name  gender
## 0    Barney    Male
## 1       Ted    Male
## 2  Marshall    Male
## 3     Lilly  Female
## 4     Robin  Female
\end{verbatim}

\hypertarget{mutate}{%
\section{mutate()}\label{mutate}}

{\textbf{Task: Generate a variable \texttt{grade\_p}, expressing grade out of 100.
}}

dplyr

pandas

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{grade\_p =}\NormalTok{ grade}\SpecialCharTok{/}\DecValTok{20}\SpecialCharTok{*}\DecValTok{100}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 4
##   name     gender grade grade_p
##   <chr>    <chr>  <dbl>   <dbl>
## 1 Barney   Male      10      50
## 2 Ted      Male      11      55
## 3 Marshall Male      13      65
## 4 Lilly    Female    12      60
## 5 Robin    Female    14      70
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df[}\StringTok{\textquotesingle{}grade\_p\textquotesingle{}}\NormalTok{] }\OperatorTok{=}\NormalTok{ df[}\StringTok{\textquotesingle{}grade\textquotesingle{}}\NormalTok{]}\OperatorTok{/}\DecValTok{20}\OperatorTok{*}\DecValTok{100}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##        name  gender  grade  grade_p
## 0    Barney    Male     10     50.0
## 1       Ted    Male     11     55.0
## 2  Marshall    Male     13     65.0
## 3     Lilly  Female     12     60.0
## 4     Robin  Female     14     70.0
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# now drop the newly created variable}
\NormalTok{df.drop(columns }\OperatorTok{=} \StringTok{\textquotesingle{}grade\_p\textquotesingle{}}\NormalTok{, inplace }\OperatorTok{=} \VariableTok{True}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{filter}{%
\section{filter()}\label{filter}}

{\textbf{Task: Keep Barney or females.
}}

dplyr

pandas

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(name }\SpecialCharTok{==} \StringTok{"Barney"}\SpecialCharTok{|}\NormalTok{ gender }\SpecialCharTok{==} \StringTok{"Female"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 3 x 3
##   name   gender grade
##   <chr>  <chr>  <dbl>
## 1 Barney Male      10
## 2 Lilly  Female    12
## 3 Robin  Female    14
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df[(df[}\StringTok{"name"}\NormalTok{] }\OperatorTok{==} \StringTok{"Barney"}\NormalTok{) }\OperatorTok{|} 
\NormalTok{   (df[}\StringTok{"gender"}\NormalTok{] }\OperatorTok{==} \StringTok{"Female"}\NormalTok{)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      name  gender  grade
## 0  Barney    Male     10
## 3   Lilly  Female     12
## 4   Robin  Female     14
\end{verbatim}

\hypertarget{group_by-and-summarize}{%
\section{group\_by() and summarize()}\label{group_by-and-summarize}}

{\textbf{Task: Grouped by gender, find mean grade.
}}

dplyr

pandas

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{group\_by}\NormalTok{(gender) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarize}\NormalTok{(}\AttributeTok{avg\_grade =} \FunctionTok{mean}\NormalTok{(grade))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 2 x 2
##   gender avg_grade
##   <chr>      <dbl>
## 1 Female      13  
## 2 Male        11.3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# returns a series}
\NormalTok{df.groupby(}\StringTok{"gender"}\NormalTok{)[}\StringTok{\textquotesingle{}grade\textquotesingle{}}\NormalTok{].mean()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## gender
## Female    13.000000
## Male      11.333333
## Name: grade, dtype: float64
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# returns a data frame}
\NormalTok{df[[}\StringTok{\textquotesingle{}gender\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}grade\textquotesingle{}}\NormalTok{]].groupby(}\StringTok{"gender"}\NormalTok{).mean()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##             grade
## gender           
## Female  13.000000
## Male    11.333333
\end{verbatim}

{\textbf{Task: Grouped by gender, find mean, median, minimum, and maximum grade.
}}

dplyr

pandas

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{group\_by}\NormalTok{(gender) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarize}\NormalTok{(}\AttributeTok{mean =} \FunctionTok{mean}\NormalTok{(grade),}
            \AttributeTok{median =} \FunctionTok{median}\NormalTok{(grade),}
            \AttributeTok{min =} \FunctionTok{min}\NormalTok{(grade),}
            \AttributeTok{max =} \FunctionTok{max}\NormalTok{(grade))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 2 x 5
##   gender  mean median   min   max
##   <chr>  <dbl>  <dbl> <dbl> <dbl>
## 1 Female  13       13    12    14
## 2 Male    11.3     11    10    13
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df.groupby(}\StringTok{"gender"}\NormalTok{)[}\StringTok{\textquotesingle{}grade\textquotesingle{}}\NormalTok{].agg(}
  \CommentTok{\# provide a dictionary}
\NormalTok{  \{}\CommentTok{\# variable name followed by function}
    \StringTok{\textquotesingle{}mean\textquotesingle{}}\NormalTok{: }\StringTok{\textquotesingle{}mean\textquotesingle{}}\NormalTok{,}
    \StringTok{\textquotesingle{}median\textquotesingle{}}\NormalTok{: }\StringTok{\textquotesingle{}median\textquotesingle{}}\NormalTok{,}
    \StringTok{\textquotesingle{}min\textquotesingle{}}\NormalTok{: }\StringTok{\textquotesingle{}min\textquotesingle{}}\NormalTok{,}
    \StringTok{\textquotesingle{}max\textquotesingle{}}\NormalTok{: }\StringTok{\textquotesingle{}max\textquotesingle{}}
\NormalTok{  \}}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##              mean  median  min  max
## gender                             
## Female  13.000000      13   12   14
## Male    11.333333      11   10   13
## 
## C:/Users/Bhaswar/AppData/Local/r-miniconda/envs/r-reticulate/python.exe:7: FutureWarning: using a dict on a Series for aggregation
## is deprecated and will be removed in a future version. Use                 named aggregation instead.
## 
##     >>> grouper.agg(name_1=func_1, name_2=func_2)
\end{verbatim}

\hypertarget{arrange}{%
\section{arrange()}\label{arrange}}

{\textbf{Task: Arrange grade in ascending order.
}}

dplyr

pandas

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{arrange}\NormalTok{(grade)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 3
##   name     gender grade
##   <chr>    <chr>  <dbl>
## 1 Barney   Male      10
## 2 Ted      Male      11
## 3 Lilly    Female    12
## 4 Marshall Male      13
## 5 Robin    Female    14
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df.sort\_values(}\StringTok{\textquotesingle{}grade\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##        name  gender  grade
## 0    Barney    Male     10
## 1       Ted    Male     11
## 3     Lilly  Female     12
## 2  Marshall    Male     13
## 4     Robin  Female     14
\end{verbatim}

{\textbf{Task: Arrange grade in ascending order.
}}

dplyr

pandas

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{arrange}\NormalTok{(}\FunctionTok{desc}\NormalTok{(grade))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 3
##   name     gender grade
##   <chr>    <chr>  <dbl>
## 1 Robin    Female    14
## 2 Marshall Male      13
## 3 Lilly    Female    12
## 4 Ted      Male      11
## 5 Barney   Male      10
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df.sort\_values(}\StringTok{\textquotesingle{}grade\textquotesingle{}}\NormalTok{, ascending }\OperatorTok{=} \VariableTok{False}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##        name  gender  grade
## 4     Robin  Female     14
## 2  Marshall    Male     13
## 3     Lilly  Female     12
## 1       Ted    Male     11
## 0    Barney    Male     10
\end{verbatim}

{\textbf{Task: Arrange gender in ascending order then arrange grade in descending order.
}}

dplyr

pandas

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{arrange}\NormalTok{(gender, }\FunctionTok{desc}\NormalTok{(grade))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 3
##   name     gender grade
##   <chr>    <chr>  <dbl>
## 1 Robin    Female    14
## 2 Lilly    Female    12
## 3 Marshall Male      13
## 4 Ted      Male      11
## 5 Barney   Male      10
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df.sort\_values([}\StringTok{\textquotesingle{}gender\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}grade\textquotesingle{}}\NormalTok{],}
\NormalTok{                ascending }\OperatorTok{=}\NormalTok{ [}\VariableTok{True}\NormalTok{, }\VariableTok{False}\NormalTok{])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##        name  gender  grade
## 4     Robin  Female     14
## 3     Lilly  Female     12
## 2  Marshall    Male     13
## 1       Ted    Male     11
## 0    Barney    Male     10
\end{verbatim}

\hypertarget{python}{%
\chapter{Python}\label{python}}

\hypertarget{pandas-i-basics}{%
\section{Pandas I: Basics}\label{pandas-i-basics}}

NumPy creates ndarrays that must contain values that are of the same data type.
Pandas creates dataframes. Each column in a dataframe is an ndarray. This allows us to have
traditional tables of data where each column can be a different data type.

Important References:

\begin{itemize}
\item
  Series: \url{https://pandas.pydata.org/pandas-docs/stable/reference/series.html}
\item
  DataFrame: \url{https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\ImportTok{import}\NormalTok{ numpy }\ImportTok{as}\NormalTok{ np}
\ImportTok{import}\NormalTok{ pandas }\ImportTok{as}\NormalTok{ pd}
\end{Highlighting}
\end{Shaded}

\hypertarget{series}{%
\subsection{Series}\label{series}}

The basic data structure in pandas is the series. You can construct it in a similar fashion to making a numpy array. The command to make a Series object is
\texttt{pd.Series(data,\ index=index)}. Note that the \texttt{index} argument is optional.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data }\OperatorTok{=}\NormalTok{ pd.Series([}\FloatTok{0.25}\NormalTok{, }\FloatTok{0.5}\NormalTok{, }\FloatTok{0.75}\NormalTok{, }\FloatTok{1.0}\NormalTok{])}
\BuiltInTok{print}\NormalTok{(data)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 0    0.25
## 1    0.50
## 2    0.75
## 3    1.00
## dtype: float64
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\BuiltInTok{type}\NormalTok{(data)) }\CommentTok{\# data type}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## <class 'pandas.core.series.Series'>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(data.values) }\CommentTok{\# data values}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [0.25 0.5  0.75 1.  ]
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\BuiltInTok{type}\NormalTok{(data.values)) }\CommentTok{\# The values attribute of the series is a numpy array.}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## <class 'numpy.ndarray'>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(data.index) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## RangeIndex(start=0, stop=4, step=1)
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\BuiltInTok{type}\NormalTok{(data.index)) }\CommentTok{\# the row names are known as the index}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## <class 'pandas.core.indexes.range.RangeIndex'>
\end{verbatim}

\textbf{You can subset a pandas series like other python objects.}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(data) }\CommentTok{\# example data}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 0    0.25
## 1    0.50
## 2    0.75
## 3    1.00
## dtype: float64
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(data[}\DecValTok{1}\NormalTok{]) }\CommentTok{\# select the 2nd value}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 0.5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\BuiltInTok{type}\NormalTok{(data[}\DecValTok{1}\NormalTok{])) }\CommentTok{\# when you select only one value, it simplifies the object}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## <class 'numpy.float64'>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(data[}\DecValTok{1}\NormalTok{:}\DecValTok{3}\NormalTok{])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 1    0.50
## 2    0.75
## dtype: float64
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\BuiltInTok{type}\NormalTok{(data[}\DecValTok{1}\NormalTok{:}\DecValTok{3}\NormalTok{])) }\CommentTok{\# slicing / selecting multiple values returns a series}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## <class 'pandas.core.series.Series'>
\end{verbatim}

\textbf{You can also do fancy indexing by subsetting w/a numpy array e.g.~repeat observations.}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(data[np.array([}\DecValTok{1}\NormalTok{, }\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{])])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 1    0.50
## 0    0.25
## 1    0.50
## 2    0.75
## dtype: float64
\end{verbatim}

\textbf{Pandas uses a 0-based index by default. You may also specify the index values.}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data }\OperatorTok{=}\NormalTok{ pd.Series([}\FloatTok{0.25}\NormalTok{, }\FloatTok{0.5}\NormalTok{, }\FloatTok{0.75}\NormalTok{, }\FloatTok{1.0}\NormalTok{], index }\OperatorTok{=}\NormalTok{ [}\StringTok{\textquotesingle{}a\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}b\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}c\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}d\textquotesingle{}}\NormalTok{])}
\BuiltInTok{print}\NormalTok{(data)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## a    0.25
## b    0.50
## c    0.75
## d    1.00
## dtype: float64
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data.values}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## array([0.25, 0.5 , 0.75, 1.  ])
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data.index}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Index(['a', 'b', 'c', 'd'], dtype='object')
\end{verbatim}

\textbf{Subset with index position or name}

\begin{itemize}
\tightlist
\item
  subset with index position
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data[}\DecValTok{1}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 0.5
\end{verbatim}

\begin{itemize}
\tightlist
\item
  subset with index name
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data[}\StringTok{"a"}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 0.25
\end{verbatim}

\textbf{Slicing with \texttt{:}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data[}\DecValTok{0}\NormalTok{:}\DecValTok{2}\NormalTok{] }\CommentTok{\# slicing behavior is unchanged}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## a    0.25
## b    0.50
## dtype: float64
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data[}\StringTok{"a"}\NormalTok{:}\StringTok{"c"}\NormalTok{] }\CommentTok{\# slicing using index names includes the last value}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## a    0.25
## b    0.50
## c    0.75
## dtype: float64
\end{verbatim}

\textbf{Create a series from a python dictionary}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# remember, dictionary construction uses curly braces \{\}}
\NormalTok{samp\_dict }\OperatorTok{=}\NormalTok{ \{}\StringTok{\textquotesingle{}Tony Stark\textquotesingle{}}\NormalTok{: }\StringTok{"Robert Downey Jr."}\NormalTok{,}
             \StringTok{\textquotesingle{}Steve Rogers\textquotesingle{}}\NormalTok{: }\StringTok{"Chris Evans"}\NormalTok{,}
             \StringTok{\textquotesingle{}Natasha Romanoff\textquotesingle{}}\NormalTok{: }\StringTok{"Scarlett Johansson"}\NormalTok{,}
             \StringTok{\textquotesingle{}Bruce Banner\textquotesingle{}}\NormalTok{: }\StringTok{"Mark Ruffalo"}\NormalTok{,}
             \StringTok{\textquotesingle{}Thor\textquotesingle{}}\NormalTok{: }\StringTok{"Chris Hemsworth"}\NormalTok{,}
             \StringTok{\textquotesingle{}Clint Barton\textquotesingle{}}\NormalTok{: }\StringTok{"Jeremy Renner"}\NormalTok{\}}
\NormalTok{samp\_series }\OperatorTok{=}\NormalTok{ pd.Series(samp\_dict)}
\NormalTok{samp\_series}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Tony Stark           Robert Downey Jr.
## Steve Rogers               Chris Evans
## Natasha Romanoff    Scarlett Johansson
## Bruce Banner              Mark Ruffalo
## Thor                   Chris Hemsworth
## Clint Barton             Jeremy Renner
## dtype: object
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(samp\_series.index) }\CommentTok{\# dtype = object is for strings but allows mixed data types.}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Index(['Tony Stark', 'Steve Rogers', 'Natasha Romanoff', 'Bruce Banner',
##        'Thor', 'Clint Barton'],
##       dtype='object')
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{samp\_series.values}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## array(['Robert Downey Jr.', 'Chris Evans', 'Scarlett Johansson',
##        'Mark Ruffalo', 'Chris Hemsworth', 'Jeremy Renner'], dtype=object)
\end{verbatim}

Another example:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# ages during the First Avengers film (2012)}
\NormalTok{age\_dict }\OperatorTok{=}\NormalTok{ \{}\StringTok{\textquotesingle{}Thor\textquotesingle{}}\NormalTok{: }\DecValTok{1493}\NormalTok{,}
            \StringTok{\textquotesingle{}Steve Rogers\textquotesingle{}}\NormalTok{: }\DecValTok{104}\NormalTok{,}
            \StringTok{\textquotesingle{}Natasha Romanoff\textquotesingle{}}\NormalTok{: }\DecValTok{28}\NormalTok{,}
            \StringTok{\textquotesingle{}Clint Barton\textquotesingle{}}\NormalTok{: }\DecValTok{41}\NormalTok{,}
            \StringTok{\textquotesingle{}Tony Stark\textquotesingle{}}\NormalTok{: }\DecValTok{42}\NormalTok{,}
            \StringTok{\textquotesingle{}Bruce Banner\textquotesingle{}}\NormalTok{: }\DecValTok{42}\NormalTok{\} }\CommentTok{\# note that the dictionary order is not same here}
\NormalTok{ages }\OperatorTok{=}\NormalTok{ pd.Series(age\_dict)}
\BuiltInTok{print}\NormalTok{(ages)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Thor                1493
## Steve Rogers         104
## Natasha Romanoff      28
## Clint Barton          41
## Tony Stark            42
## Bruce Banner          42
## dtype: int64
\end{verbatim}

\textbf{Use \texttt{np.NaN} to specify missing values.}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# ages during the First Avengers film (2012)}
\NormalTok{hero\_dict }\OperatorTok{=}\NormalTok{ \{}\StringTok{\textquotesingle{}Thor\textquotesingle{}}\NormalTok{: np.NaN,}
             \StringTok{\textquotesingle{}Steve Rogers\textquotesingle{}}\NormalTok{: }\StringTok{\textquotesingle{}Captain America\textquotesingle{}}\NormalTok{,}
             \StringTok{\textquotesingle{}Natasha Romanoff\textquotesingle{}}\NormalTok{: }\StringTok{\textquotesingle{}Black Widow\textquotesingle{}}\NormalTok{,}
             \StringTok{\textquotesingle{}Clint Barton\textquotesingle{}}\NormalTok{: }\StringTok{\textquotesingle{}Hawkeye\textquotesingle{}}\NormalTok{,}
             \StringTok{\textquotesingle{}Tony Stark\textquotesingle{}}\NormalTok{: }\StringTok{\textquotesingle{}Iron Man\textquotesingle{}}\NormalTok{,}
             \StringTok{\textquotesingle{}Bruce Banner\textquotesingle{}}\NormalTok{: }\StringTok{\textquotesingle{}Hulk\textquotesingle{}}\NormalTok{\}}
\NormalTok{hero\_names }\OperatorTok{=}\NormalTok{ pd.Series(hero\_dict)}
\BuiltInTok{print}\NormalTok{(hero\_names)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Thor                            NaN
## Steve Rogers        Captain America
## Natasha Romanoff        Black Widow
## Clint Barton                Hawkeye
## Tony Stark                 Iron Man
## Bruce Banner                   Hulk
## dtype: object
\end{verbatim}

\hypertarget{dataframe}{%
\subsection{DataFrame}\label{dataframe}}

There are multiple ways of creating a DataFrame in Pandas:

\textbf{Create a dataframe by providing a dictionary of series objects.}

\begin{itemize}
\item
  The dictionary key becomes the column name. The dictionary values become values.
\item
  The keys within the dictionaries become the index.
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# we previously created the following series}
\BuiltInTok{type}\NormalTok{(samp\_series)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## <class 'pandas.core.series.Series'>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{type}\NormalTok{(hero\_names)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## <class 'pandas.core.series.Series'>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{type}\NormalTok{(ages)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## <class 'pandas.core.series.Series'>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Now create data frame using those series}
\NormalTok{avengers }\OperatorTok{=}\NormalTok{ pd.DataFrame(\{}\StringTok{\textquotesingle{}actor\textquotesingle{}}\NormalTok{: samp\_series, }\StringTok{\textquotesingle{}hero name\textquotesingle{}}\NormalTok{: hero\_names, }\StringTok{\textquotesingle{}age\textquotesingle{}}\NormalTok{: ages\})}
\CommentTok{\# the DataFrame will match the indices and sort them}
\BuiltInTok{print}\NormalTok{(avengers)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                                actor        hero name   age
## Bruce Banner            Mark Ruffalo             Hulk    42
## Clint Barton           Jeremy Renner          Hawkeye    41
## Natasha Romanoff  Scarlett Johansson      Black Widow    28
## Steve Rogers             Chris Evans  Captain America   104
## Thor                 Chris Hemsworth              NaN  1493
## Tony Stark         Robert Downey Jr.         Iron Man    42
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\BuiltInTok{type}\NormalTok{(avengers)) }\CommentTok{\# this is a DataFrame object}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## <class 'pandas.core.frame.DataFrame'>
\end{verbatim}

The data is a list of dictionaries. Each dictionary needs to have the same set of keys,
otherwise, \texttt{NaN}s will appear.

\textbf{Data is a list of dictionaries}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data }\OperatorTok{=}\NormalTok{ [\{}\StringTok{\textquotesingle{}a\textquotesingle{}}\NormalTok{: }\DecValTok{0}\NormalTok{, }\StringTok{\textquotesingle{}b\textquotesingle{}}\NormalTok{: }\DecValTok{0}\NormalTok{\},}
\NormalTok{        \{}\StringTok{\textquotesingle{}a\textquotesingle{}}\NormalTok{: }\DecValTok{1}\NormalTok{, }\StringTok{\textquotesingle{}b\textquotesingle{}}\NormalTok{: }\DecValTok{2}\NormalTok{\},}
\NormalTok{        \{}\StringTok{\textquotesingle{}a\textquotesingle{}}\NormalTok{: }\DecValTok{2}\NormalTok{, }\StringTok{\textquotesingle{}b\textquotesingle{}}\NormalTok{: }\DecValTok{5}\NormalTok{\}]}
\NormalTok{data}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [{'a': 0, 'b': 0}, {'a': 1, 'b': 2}, {'a': 2, 'b': 5}]
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(pd.DataFrame(data, index }\OperatorTok{=}\NormalTok{ [}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{]))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    a  b
## 1  0  0
## 2  1  2
## 3  2  5
\end{verbatim}

Mismatch of keys produces NaN

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data2 }\OperatorTok{=}\NormalTok{ [\{}\StringTok{\textquotesingle{}a\textquotesingle{}}\NormalTok{: }\DecValTok{0}\NormalTok{, }\StringTok{\textquotesingle{}b\textquotesingle{}}\NormalTok{: }\DecValTok{0}\NormalTok{\},}
\NormalTok{         \{}\StringTok{\textquotesingle{}a\textquotesingle{}}\NormalTok{: }\DecValTok{1}\NormalTok{, }\StringTok{\textquotesingle{}b\textquotesingle{}}\NormalTok{: }\DecValTok{2}\NormalTok{\},}
\NormalTok{         \{}\StringTok{\textquotesingle{}a\textquotesingle{}}\NormalTok{: }\DecValTok{2}\NormalTok{, }\StringTok{\textquotesingle{}c\textquotesingle{}}\NormalTok{: }\DecValTok{5}\NormalTok{\}] }\CommentTok{\# mismatch of keys. NAs will appear}
\NormalTok{data2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [{'a': 0, 'b': 0}, {'a': 1, 'b': 2}, {'a': 2, 'c': 5}]
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pd.DataFrame(data2)}\CommentTok{\# \# if the index argument is not supplied, it defaults to integer index start at 0}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    a    b    c
## 0  0  0.0  NaN
## 1  1  2.0  NaN
## 2  2  NaN  5.0
\end{verbatim}

\textbf{Convert a dictionary to a DataFrame.}

\begin{itemize}
\item
  The keys form column names, and the values are lists/arrays of values.
\item
  The arrays need to be of the same length.
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data3 }\OperatorTok{=}\NormalTok{ \{}\StringTok{\textquotesingle{}a\textquotesingle{}}\NormalTok{: [}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{], }\StringTok{\textquotesingle{}b\textquotesingle{}}\NormalTok{: [}\StringTok{\textquotesingle{}x\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}y\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}z\textquotesingle{}}\NormalTok{]\}}
\NormalTok{data3 }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## {'a': [1, 2, 3], 'b': ['x', 'y', 'z']}
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pd.DataFrame(data3)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    a  b
## 0  1  x
## 1  2  y
## 2  3  z
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data4 }\OperatorTok{=}\NormalTok{ \{}\StringTok{\textquotesingle{}a\textquotesingle{}}\NormalTok{: [}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{4}\NormalTok{], }\StringTok{\textquotesingle{}b\textquotesingle{}}\NormalTok{: [}\StringTok{\textquotesingle{}x\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}y\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}z\textquotesingle{}}\NormalTok{]\} }\CommentTok{\# arrays are not of the same length}
\NormalTok{pd.DataFrame(data4)}
\end{Highlighting}
\end{Shaded}

The code above will get the following error

\begin{quote}
ValueError: arrays must all be same length
\end{quote}

\textbf{Turn a 2D Numpy array (matrix) into a DataFrame by adding column names and optionally
index values.}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data }\OperatorTok{=}\NormalTok{ np.random.randint(}\DecValTok{10}\NormalTok{, size }\OperatorTok{=} \DecValTok{10}\NormalTok{).reshape((}\DecValTok{5}\NormalTok{,}\DecValTok{2}\NormalTok{))}
\BuiltInTok{print}\NormalTok{(data)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [[1 8]
##  [6 6]
##  [7 2]
##  [7 9]
##  [1 7]]
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(pd.DataFrame(data, columns }\OperatorTok{=}\NormalTok{ [}\StringTok{"x"}\NormalTok{,}\StringTok{"y"}\NormalTok{], index }\OperatorTok{=}\NormalTok{ [}\StringTok{\textquotesingle{}a\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}b\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}c\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}d\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}e\textquotesingle{}}\NormalTok{]))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    x  y
## a  1  8
## b  6  6
## c  7  2
## d  7  9
## e  1  7
\end{verbatim}

\hypertarget{subsetting-the-dataframe}{%
\subsection{Subsetting the DataFrame}\label{subsetting-the-dataframe}}

In a DataFrame, the \texttt{.columns} attribute show the column names and the \texttt{.index} attribute
show the row names.

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(avengers)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                                actor        hero name   age
## Bruce Banner            Mark Ruffalo             Hulk    42
## Clint Barton           Jeremy Renner          Hawkeye    41
## Natasha Romanoff  Scarlett Johansson      Black Widow    28
## Steve Rogers             Chris Evans  Captain America   104
## Thor                 Chris Hemsworth              NaN  1493
## Tony Stark         Robert Downey Jr.         Iron Man    42
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(avengers.columns)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Index(['actor', 'hero name', 'age'], dtype='object')
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(avengers.index)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Index(['Bruce Banner', 'Clint Barton', 'Natasha Romanoff', 'Steve Rogers',
##        'Thor', 'Tony Stark'],
##       dtype='object')
\end{verbatim}

You can select a column using:

\begin{itemize}
\tightlist
\item
  dot notation
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{avengers.actor }\CommentTok{\# extracting the column}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Bruce Banner              Mark Ruffalo
## Clint Barton             Jeremy Renner
## Natasha Romanoff    Scarlett Johansson
## Steve Rogers               Chris Evans
## Thor                   Chris Hemsworth
## Tony Stark           Robert Downey Jr.
## Name: actor, dtype: object
\end{verbatim}

\begin{itemize}
\tightlist
\item
  single square brackets.
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{avengers[}\StringTok{"hero name"}\NormalTok{] }\CommentTok{\# if there\textquotesingle{}s a space in the column name, you\textquotesingle{}ll need to use square brackets}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Bruce Banner                   Hulk
## Clint Barton                Hawkeye
## Natasha Romanoff        Black Widow
## Steve Rogers        Captain America
## Thor                            NaN
## Tony Stark                 Iron Man
## Name: hero name, dtype: object
\end{verbatim}

Single column is returned as series. For example, \texttt{avengers.actor} is a Pandas Series.

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{type}\NormalTok{(avengers.actor)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## <class 'pandas.core.series.Series'>
\end{verbatim}

\textbf{Subset}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(avengers) }\CommentTok{\# just for ease of inspection}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                                actor        hero name   age
## Bruce Banner            Mark Ruffalo             Hulk    42
## Clint Barton           Jeremy Renner          Hawkeye    41
## Natasha Romanoff  Scarlett Johansson      Black Widow    28
## Steve Rogers             Chris Evans  Captain America   104
## Thor                 Chris Hemsworth              NaN  1493
## Tony Stark         Robert Downey Jr.         Iron Man    42
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{avengers.actor[}\DecValTok{1}\NormalTok{] }\CommentTok{\# 0 based indexing}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 'Jeremy Renner'
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{avengers.actor[avengers.age }\OperatorTok{==} \DecValTok{42}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Bruce Banner         Mark Ruffalo
## Tony Stark      Robert Downey Jr.
## Name: actor, dtype: object
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{avengers[}\StringTok{"hero name"}\NormalTok{][}\StringTok{\textquotesingle{}Steve Rogers\textquotesingle{}}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 'Captain America'
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{avengers[}\StringTok{"hero name"}\NormalTok{][}\StringTok{\textquotesingle{}Steve Rogers\textquotesingle{}}\NormalTok{:}\StringTok{\textquotesingle{}Tony Stark\textquotesingle{}}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Steve Rogers    Captain America
## Thor                        NaN
## Tony Stark             Iron Man
## Name: hero name, dtype: object
\end{verbatim}

\hypertarget{loc}{%
\subsection{\texorpdfstring{\texttt{.loc}}{.loc}}\label{loc}}

The \texttt{.loc} attribute can be used to subset the DataFrame using the index names.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{avengers.loc[}\StringTok{\textquotesingle{}Thor\textquotesingle{}}\NormalTok{] }\CommentTok{\# subset based on location to get a row}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## actor        Chris Hemsworth
## hero name                NaN
## age                     1493
## Name: Thor, dtype: object
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\BuiltInTok{type}\NormalTok{(avengers.loc[}\StringTok{\textquotesingle{}Thor\textquotesingle{}}\NormalTok{]))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## <class 'pandas.core.series.Series'>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\BuiltInTok{type}\NormalTok{(avengers.loc[}\StringTok{\textquotesingle{}Thor\textquotesingle{}}\NormalTok{].values))  }\CommentTok{\# the values are of mixed type but is still a numpy array. }
\CommentTok{\# this is possible because it is a structured numpy array. (covered in "Python for Data Science" chapter 2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## <class 'numpy.ndarray'>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(avengers.loc[ : ,}\StringTok{\textquotesingle{}age\textquotesingle{}}\NormalTok{]) }\CommentTok{\# subset based on location to get a column}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Bruce Banner          42
## Clint Barton          41
## Natasha Romanoff      28
## Steve Rogers         104
## Thor                1493
## Tony Stark            42
## Name: age, dtype: int64
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\BuiltInTok{type}\NormalTok{(avengers.loc[:,}\StringTok{\textquotesingle{}age\textquotesingle{}}\NormalTok{]))  }\CommentTok{\#the object is a pandas series}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## <class 'pandas.core.series.Series'>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\BuiltInTok{type}\NormalTok{(avengers.loc[:,}\StringTok{\textquotesingle{}age\textquotesingle{}}\NormalTok{].values))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## <class 'numpy.ndarray'>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{avengers.loc[}\StringTok{\textquotesingle{}Steve Rogers\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}age\textquotesingle{}}\NormalTok{]  }\CommentTok{\# you can provide a pair of \textquotesingle{}coordinates\textquotesingle{} to get a particular value}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 104
\end{verbatim}

\hypertarget{iloc}{%
\subsection{\texorpdfstring{\texttt{.iloc}}{.iloc}}\label{iloc}}

The \texttt{.iloc} attribute can be used to subset the DataFrame using the index position (zero-indexed).

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(avengers) }\CommentTok{\# just for ease of inspection}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                                actor        hero name   age
## Bruce Banner            Mark Ruffalo             Hulk    42
## Clint Barton           Jeremy Renner          Hawkeye    41
## Natasha Romanoff  Scarlett Johansson      Black Widow    28
## Steve Rogers             Chris Evans  Captain America   104
## Thor                 Chris Hemsworth              NaN  1493
## Tony Stark         Robert Downey Jr.         Iron Man    42
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{avengers.iloc[}\DecValTok{3}\NormalTok{,] }\CommentTok{\# subset based on index location}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## actor            Chris Evans
## hero name    Captain America
## age                      104
## Name: Steve Rogers, dtype: object
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{avengers.iloc[}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{] }\CommentTok{\# pair of coordinates}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 'Hulk'
\end{verbatim}

\hypertarget{assignment-with-.loc-and-.iloc}{%
\subsection{\texorpdfstring{Assignment with \texttt{.loc} and \texttt{.iloc}}{Assignment with .loc and .iloc}}\label{assignment-with-.loc-and-.iloc}}

The \texttt{.loc} and \texttt{.iloc} attributes can be used in conjunction with assignment.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# set values individually}
\NormalTok{avengers.loc[}\StringTok{\textquotesingle{}Thor\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}age\textquotesingle{}}\NormalTok{] }\OperatorTok{=} \DecValTok{1500}
\NormalTok{avengers.loc[}\StringTok{\textquotesingle{}Thor\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}hero name\textquotesingle{}}\NormalTok{] }\OperatorTok{=} \StringTok{\textquotesingle{}Thor\textquotesingle{}}
\NormalTok{avengers}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                                actor        hero name   age
## Bruce Banner            Mark Ruffalo             Hulk    42
## Clint Barton           Jeremy Renner          Hawkeye    41
## Natasha Romanoff  Scarlett Johansson      Black Widow    28
## Steve Rogers             Chris Evans  Captain America   104
## Thor                 Chris Hemsworth             Thor  1500
## Tony Stark         Robert Downey Jr.         Iron Man    42
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# assign multiple values at once}
\NormalTok{avengers.loc[}\StringTok{\textquotesingle{}Thor\textquotesingle{}}\NormalTok{, [}\StringTok{\textquotesingle{}hero name\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}age\textquotesingle{}}\NormalTok{]] }\OperatorTok{=}\NormalTok{ [np.NaN, }\DecValTok{1493}\NormalTok{]}
\NormalTok{avengers}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                                actor        hero name   age
## Bruce Banner            Mark Ruffalo             Hulk    42
## Clint Barton           Jeremy Renner          Hawkeye    41
## Natasha Romanoff  Scarlett Johansson      Black Widow    28
## Steve Rogers             Chris Evans  Captain America   104
## Thor                 Chris Hemsworth              NaN  1493
## Tony Stark         Robert Downey Jr.         Iron Man    42
\end{verbatim}

\hypertarget{loc-vs-.iloc-with-numeric-index}{%
\subsection{\texorpdfstring{\texttt{.loc} vs \texttt{.iloc} with numeric index}{.loc vs .iloc with numeric index}}\label{loc-vs-.iloc-with-numeric-index}}

The following DataFrame has a numeric index, but it starts at 1 instead of 0.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data }\OperatorTok{=}\NormalTok{ [\{}\StringTok{\textquotesingle{}a\textquotesingle{}}\NormalTok{: }\DecValTok{11}\NormalTok{, }\StringTok{\textquotesingle{}b\textquotesingle{}}\NormalTok{: }\DecValTok{2}\NormalTok{\},}
\NormalTok{        \{}\StringTok{\textquotesingle{}a\textquotesingle{}}\NormalTok{: }\DecValTok{12}\NormalTok{, }\StringTok{\textquotesingle{}b\textquotesingle{}}\NormalTok{: }\DecValTok{4}\NormalTok{\},}
\NormalTok{        \{}\StringTok{\textquotesingle{}a\textquotesingle{}}\NormalTok{: }\DecValTok{13}\NormalTok{, }\StringTok{\textquotesingle{}b\textquotesingle{}}\NormalTok{: }\DecValTok{6}\NormalTok{\}]}
\NormalTok{df }\OperatorTok{=}\NormalTok{ pd.DataFrame(data, index }\OperatorTok{=}\NormalTok{ [}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{])}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##     a  b
## 1  11  2
## 2  12  4
## 3  13  6
\end{verbatim}

{\textbf{\texttt{.loc} always uses the actual index.}}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df.loc[}\DecValTok{1}\NormalTok{, :] }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## a    11
## b     2
## Name: 1, dtype: int64
\end{verbatim}

{\textbf{\texttt{.iloc} always uses the position using a 0-based index.}}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df.iloc[}\DecValTok{1}\NormalTok{, :]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## a    12
## b     4
## Name: 2, dtype: int64
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df.iloc[}\DecValTok{3}\NormalTok{, :] }\CommentTok{\# using a position that doesn\textquotesingle{}t exist results in an exception. }
\end{Highlighting}
\end{Shaded}

\begin{quote}
IndexError: single positional indexer is out-of-bounds
\end{quote}

\hypertarget{boolean-subsetting-examples-with-.loc}{%
\subsection{\texorpdfstring{Boolean subsetting examples with \texttt{.loc}}{Boolean subsetting examples with .loc}}\label{boolean-subsetting-examples-with-.loc}}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(avengers) }\CommentTok{\# just for ease of inspection}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                                actor        hero name   age
## Bruce Banner            Mark Ruffalo             Hulk    42
## Clint Barton           Jeremy Renner          Hawkeye    41
## Natasha Romanoff  Scarlett Johansson      Black Widow    28
## Steve Rogers             Chris Evans  Captain America   104
## Thor                 Chris Hemsworth              NaN  1493
## Tony Stark         Robert Downey Jr.         Iron Man    42
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# select avengers whose age is less than 50 and greater than 40}
\CommentTok{\# select the columns \textquotesingle{}hero name\textquotesingle{} and \textquotesingle{}age\textquotesingle{}}
\NormalTok{avengers.loc[ (avengers.age }\OperatorTok{\textless{}} \DecValTok{50}\NormalTok{) }\OperatorTok{\&}\NormalTok{ (avengers.age }\OperatorTok{\textgreater{}} \DecValTok{40}\NormalTok{), [}\StringTok{\textquotesingle{}hero name\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}age\textquotesingle{}}\NormalTok{]]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##              hero name  age
## Bruce Banner      Hulk   42
## Clint Barton   Hawkeye   41
## Tony Stark    Iron Man   42
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Use the index of the DataFrame, treat it as a string, and select rows that start with B}
\NormalTok{avengers.loc[ avengers.index.}\BuiltInTok{str}\NormalTok{.startswith(}\StringTok{\textquotesingle{}B\textquotesingle{}}\NormalTok{), : ]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                      actor hero name  age
## Bruce Banner  Mark Ruffalo      Hulk   42
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Use the index of the DataFrame, treat it as a string,}
\CommentTok{\# find the character capital R. Find returns {-}1 if it does not find the letter}
\CommentTok{\# We select rows that did not result in {-}1, which means it does contain a capital R}
\NormalTok{avengers.loc[ avengers.index.}\BuiltInTok{str}\NormalTok{.find(}\StringTok{\textquotesingle{}R\textquotesingle{}}\NormalTok{) }\OperatorTok{!=} \OperatorTok{{-}}\DecValTok{1}\NormalTok{, : ]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                                actor        hero name  age
## Natasha Romanoff  Scarlett Johansson      Black Widow   28
## Steve Rogers             Chris Evans  Captain America  104
\end{verbatim}

\texttt{python\ avengers.loc{[}\ avengers.index.str.find(\textquotesingle{}X\textquotesingle{})\ !=\ -1,\ :\ {]}} gets the message

\begin{quote}
Error: unexpected `:' in ``avengers.loc{[} avengers.index.str.find(`X') != -1, :''
\end{quote}

\hypertarget{other-commonly-used-dataframe-attributes}{%
\subsection{Other commonly used DataFrame attributes}\label{other-commonly-used-dataframe-attributes}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{avengers.T }\CommentTok{\# the transpose}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##            Bruce Banner   Clint Barton  ...             Thor         Tony Stark
## actor      Mark Ruffalo  Jeremy Renner  ...  Chris Hemsworth  Robert Downey Jr.
## hero name          Hulk        Hawkeye  ...              NaN           Iron Man
## age                  42             41  ...             1493                 42
## 
## [3 rows x 6 columns]
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{avengers.dtypes }\CommentTok{\# the data types contained in the DataFrame}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## actor        object
## hero name    object
## age           int64
## dtype: object
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{avengers.shape }\CommentTok{\# shape}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## (6, 3)
\end{verbatim}

\hypertarget{importing-data-with-pd.read_csv}{%
\subsection{Importing Data with pd.read\_csv()}\label{importing-data-with-pd.read_csv}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Titanic Dataset}
\NormalTok{url }\OperatorTok{=} \StringTok{\textquotesingle{}https://assets.datacamp.com/production/course\_1607/datasets/titanic\_sub.csv\textquotesingle{}}
\NormalTok{titanic }\OperatorTok{=}\NormalTok{ pd.read\_csv(url)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{titanic}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      PassengerId  Survived  Pclass  ...     Fare  Cabin  Embarked
## 0              1         0       3  ...   7.2500    NaN         S
## 1              2         1       1  ...  71.2833    C85         C
## 2              3         1       3  ...   7.9250    NaN         S
## 3              4         1       1  ...  53.1000   C123         S
## 4              5         0       3  ...   8.0500    NaN         S
## ..           ...       ...     ...  ...      ...    ...       ...
## 886          887         0       2  ...  13.0000    NaN         S
## 887          888         1       1  ...  30.0000    B42         S
## 888          889         0       3  ...  23.4500    NaN         S
## 889          890         1       1  ...  30.0000   C148         C
## 890          891         0       3  ...   7.7500    NaN         Q
## 
## [891 rows x 11 columns]
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{titanic.shape}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## (891, 11)
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{titanic.columns}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Index(['PassengerId', 'Survived', 'Pclass', 'Sex', 'Age', 'SibSp', 'Parch',
##        'Ticket', 'Fare', 'Cabin', 'Embarked'],
##       dtype='object')
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{titanic.index}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## RangeIndex(start=0, stop=891, step=1)
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{titanic.info()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## <class 'pandas.core.frame.DataFrame'>
## RangeIndex: 891 entries, 0 to 890
## Data columns (total 11 columns):
## PassengerId    891 non-null int64
## Survived       891 non-null int64
## Pclass         891 non-null int64
## Sex            891 non-null object
## Age            714 non-null float64
## SibSp          891 non-null int64
## Parch          891 non-null int64
## Ticket         891 non-null object
## Fare           891 non-null float64
## Cabin          204 non-null object
## Embarked       889 non-null object
## dtypes: float64(2), int64(5), object(4)
## memory usage: 76.7+ KB
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{titanic.describe() }\CommentTok{\# displays summary statistics of the numeric variables}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##        PassengerId    Survived      Pclass  ...       SibSp       Parch        Fare
## count   891.000000  891.000000  891.000000  ...  891.000000  891.000000  891.000000
## mean    446.000000    0.383838    2.308642  ...    0.523008    0.381594   32.204208
## std     257.353842    0.486592    0.836071  ...    1.102743    0.806057   49.693429
## min       1.000000    0.000000    1.000000  ...    0.000000    0.000000    0.000000
## 25%     223.500000    0.000000    2.000000  ...    0.000000    0.000000    7.910400
## 50%     446.000000    0.000000    3.000000  ...    0.000000    0.000000   14.454200
## 75%     668.500000    1.000000    3.000000  ...    1.000000    0.000000   31.000000
## max     891.000000    1.000000    3.000000  ...    8.000000    6.000000  512.329200
## 
## [8 rows x 7 columns]
\end{verbatim}

\hypertarget{pandas-ii-indexing-arithmetic-missing-values}{%
\section{Pandas II: Indexing, Arithmetic, Missing Values}\label{pandas-ii-indexing-arithmetic-missing-values}}

\hypertarget{indexing}{%
\subsection{Indexing}\label{indexing}}

\textbf{Series that we will use as examples}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# note that the value after the decimal place corresponds to the letter position.}
\CommentTok{\# i.e. 1.4 corresponds to d, the fourth letter.}
\NormalTok{original1 }\OperatorTok{=}\NormalTok{ pd.Series([}\FloatTok{1.4}\NormalTok{, }\FloatTok{2.3}\NormalTok{, }\FloatTok{3.1}\NormalTok{, }\FloatTok{4.2}\NormalTok{], index }\OperatorTok{=}\NormalTok{ [}\StringTok{\textquotesingle{}d\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}c\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}a\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}b\textquotesingle{}}\NormalTok{])}
\NormalTok{original2 }\OperatorTok{=}\NormalTok{ pd.Series([}\FloatTok{2.2}\NormalTok{, }\FloatTok{3.1}\NormalTok{, }\FloatTok{1.3}\NormalTok{, }\FloatTok{4.4}\NormalTok{], index }\OperatorTok{=}\NormalTok{ [}\StringTok{\textquotesingle{}b\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}a\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}c\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}d\textquotesingle{}}\NormalTok{])}
\end{Highlighting}
\end{Shaded}

{\textbf{When you create a series, the original order of the index is preserved.}}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{original1}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## d    1.4
## c    2.3
## a    3.1
## b    4.2
## dtype: float64
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{original2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## b    2.2
## a    3.1
## c    1.3
## d    4.4
## dtype: float64
\end{verbatim}

{\textbf{Making a DataFrame with multiple series with the same index preserves the index order.}}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pd.DataFrame(\{}\StringTok{"x"}\NormalTok{:original1, }\StringTok{"x2"}\NormalTok{: original1 }\OperatorTok{*} \DecValTok{2}\NormalTok{\})}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      x   x2
## d  1.4  2.8
## c  2.3  4.6
## a  3.1  6.2
## b  4.2  8.4
\end{verbatim}

{\textbf{Note that original1 and original2 have different index orders. Because original1 and original2 have index in different order, Pandas will sort the index before putting them together}}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{=}\NormalTok{ pd.DataFrame(\{}\StringTok{"x"}\NormalTok{:original1, }\StringTok{"y"}\NormalTok{: original2\})}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      x    y
## a  3.1  3.1
## b  4.2  2.2
## c  2.3  1.3
## d  1.4  4.4
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{original1.index }\CommentTok{\# the index of original1 is the letters d, c, a, b in a tuple{-}like object}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Index(['d', 'c', 'a', 'b'], dtype='object')
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{original1[}\StringTok{\textquotesingle{}d\textquotesingle{}}\NormalTok{:}\StringTok{\textquotesingle{}a\textquotesingle{}}\NormalTok{] }\CommentTok{\# when slicing pandas uses the index order or original1}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## d    1.4
## c    2.3
## a    3.1
## dtype: float64
\end{verbatim}

{\textbf{When slicing Pandas uses the index order of the DataFrame, which has been sorted.}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df.index }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Index(['a', 'b', 'c', 'd'], dtype='object')
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df[}\StringTok{\textquotesingle{}a\textquotesingle{}}\NormalTok{:}\StringTok{\textquotesingle{}c\textquotesingle{}}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      x    y
## a  3.1  3.1
## b  4.2  2.2
## c  2.3  1.3
\end{verbatim}

\textbf{Rearranging value}

{\textbf{Both Series and DataFrames have the .sort\_index() and .sort\_values() methods which can be used to rearrange the value.}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{original2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## b    2.2
## a    3.1
## c    1.3
## d    4.4
## dtype: float64
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{original2.sort\_index()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## a    3.1
## b    2.2
## c    1.3
## d    4.4
## dtype: float64
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{original2.sort\_values()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## c    1.3
## b    2.2
## a    3.1
## d    4.4
## dtype: float64
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      x    y
## a  3.1  3.1
## b  4.2  2.2
## c  2.3  1.3
## d  1.4  4.4
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df.sort\_values(by }\OperatorTok{=} \StringTok{"x"}\NormalTok{, ascending }\OperatorTok{=} \VariableTok{False}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      x    y
## b  4.2  2.2
## a  3.1  3.1
## c  2.3  1.3
## d  1.4  4.4
\end{verbatim}

\textbf{Changing the Index}

{\textbf{The index of a Pandas Series or Pandas DataFrame is immutable and cannot be modified.}} However, if you want to change the index of a series or dataframe, you can define a new index and replace the existing index of the series/DataFrame.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{original1}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## d    1.4
## c    2.3
## a    3.1
## b    4.2
## dtype: float64
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{original1.index }\OperatorTok{=} \BuiltInTok{range}\NormalTok{(}\DecValTok{4}\NormalTok{) }\CommentTok{\# I replace the index of the series with this range object.}
\NormalTok{original1}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 0    1.4
## 1    2.3
## 2    3.1
## 3    4.2
## dtype: float64
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{original1.index }\CommentTok{\# We can see this has automatically become a RangeIndex object}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## RangeIndex(start=0, stop=4, step=1)
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{original1[}\DecValTok{1}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 2.3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{original1.loc[}\DecValTok{1}\NormalTok{] }\CommentTok{\# behaves the same as above}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 2.3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{original1.iloc[}\DecValTok{1}\NormalTok{] }\CommentTok{\# behaves the same as above because the range index starts at 0}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 2.3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{original1.index }\OperatorTok{=} \BuiltInTok{range}\NormalTok{(}\DecValTok{1}\NormalTok{,}\DecValTok{5}\NormalTok{)}
\NormalTok{original1}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 1    1.4
## 2    2.3
## 3    3.1
## 4    4.2
## dtype: float64
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{original1[}\DecValTok{1}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 1.4
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{original1.loc[}\DecValTok{1}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 1.4
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{original1.iloc[}\DecValTok{1}\NormalTok{] }\CommentTok{\# behavior is different because range index starts at 1}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 2.3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{original1[}\StringTok{\textquotesingle{}a\textquotesingle{}}\NormalTok{] }\CommentTok{\# throws an error because \textquotesingle{}a\textquotesingle{} is no longer part of the index and cannot be used to select values}
\end{Highlighting}
\end{Shaded}

\begin{quote}
KeyError: `a'
\end{quote}

You can change the index of a DataFrame by defining a new object and assigning it to the index.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      x    y
## a  3.1  3.1
## b  4.2  2.2
## c  2.3  1.3
## d  1.4  4.4
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df.index }\OperatorTok{=}\NormalTok{ [}\StringTok{\textquotesingle{}j\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}k\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}l\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}m\textquotesingle{}}\NormalTok{]}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      x    y
## j  3.1  3.1
## k  4.2  2.2
## l  2.3  1.3
## m  1.4  4.4
\end{verbatim}

\hypertarget{r-strings}{%
\chapter{R Strings}\label{r-strings}}

\hypertarget{string-manupulation-with-base-r-functions}{%
\section{String Manupulation with Base R Functions}\label{string-manupulation-with-base-r-functions}}

There are many functions in base R for basic string manipulation.

Function

Example

{\textbf{\texttt{nchar()}
}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{y }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"Hello"}\NormalTok{, }\StringTok{"World"}\NormalTok{, }\StringTok{"Hello"}\NormalTok{, }\StringTok{"Universe"}\NormalTok{)}
\FunctionTok{nchar}\NormalTok{(y) }\CommentTok{\# Returns number of characters}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 5 5 5 8
\end{verbatim}

{\textbf{\texttt{tolower()}
}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{tolower}\NormalTok{(y)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "hello"    "world"    "hello"    "universe"
\end{verbatim}

{\textbf{\texttt{toupper()}
}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{toupper}\NormalTok{(y)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "HELLO"    "WORLD"    "HELLO"    "UNIVERSE"
\end{verbatim}

{\textbf{\texttt{chartr()}
}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{chartr}\NormalTok{(}\StringTok{"oe"}\NormalTok{, }\StringTok{"$\#"}\NormalTok{, y)}\CommentTok{\#o becomes $; e becomes \#}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "H#ll$"    "W$rld"    "H#ll$"    "Univ#rs#"
\end{verbatim}

{\textbf{\texttt{substr()}
}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \StringTok{"1t345s?"}
\FunctionTok{substr}\NormalTok{(x, }\DecValTok{2}\NormalTok{, }\DecValTok{6}\NormalTok{) }\CommentTok{\# provides strings from 2 to 6}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "t345s"
\end{verbatim}

{\textbf{\texttt{strsplit()}
}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \StringTok{"R\#Rocks\#!"}
\FunctionTok{strsplit}\NormalTok{(x, }\AttributeTok{split =} \StringTok{"\#"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [[1]]
## [1] "R"     "Rocks" "!"
\end{verbatim}

\hypertarget{stringr}{%
\section{\texorpdfstring{\texttt{stringr}}{stringr}}\label{stringr}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(stringr)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}ccc@{}}
\toprule
Job & stringr & Base R \\
\midrule
\endhead
String concatenation & \texttt{str\_c()} & \texttt{paste()} \\
Number of characters & \texttt{str\_length()} & \texttt{nchar()} \\
Extracts substrings & \texttt{str\_sub()} & \texttt{substr()} \\
Duplicates characters & \texttt{str\_dup()} & \\
Removes leading and trailing whitespace & \texttt{str\_trim()} & \\
Pads a string & \texttt{str\_pad()} & \\
Wraps a string paragraph & \texttt{str\_wrap()} & \\
\bottomrule
\end{longtable}

\hypertarget{regular-expressions}{%
\section{Regular Expressions}\label{regular-expressions}}

A \textbf{regular expression} (or \textbf{regex}) is a set of symbols that describes a text pattern. More formally, a regular expression is a pattern that describes a set of strings.

Regular expressions are a formal language in the sense that the symbols have a defined set of rules to specify the desired patterns.

\hypertarget{stringr-functions-for-regular-expressions}{%
\subsection{\texorpdfstring{\texttt{stringr} Functions for Regular Expressions}{stringr Functions for Regular Expressions}}\label{stringr-functions-for-regular-expressions}}

\begin{longtable}[]{@{}
  >{\centering\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.25}}
  >{\centering\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.75}}@{}}
\toprule
Function & Job \\
\midrule
\endhead
\texttt{str\_detect}(str, pattern) & Detects the presence of a pattern and returns TRUE if it is found \\
\texttt{str\_locate}(str, pattern) & Locate the 1st position of a pattern and return a matrix with start \& end.s \\
\texttt{str\_extract}(str, pattern) & Extracts text corresponding to the first match. \\
\texttt{str\_match}(str, pattern) & Extracts capture groups formed by () from the first match. \\
\texttt{str\_split}(str, pattern) & Splits string into pieces and returns a list of character vectors. \\
\bottomrule
\end{longtable}

\hypertarget{sql}{%
\chapter{SQL}\label{sql}}

\hypertarget{create}{%
\section{CREATE}\label{create}}

The general syntax to create a table:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{create} \KeywordTok{table}\NormalTok{ TABLENAME (}
\NormalTok{  COLUMN1 datatype, }
\NormalTok{  COLUMN2 datatype, }
\NormalTok{  COLUMN3 datatype, }
  \OperatorTok{..}\NormalTok{. );}
\end{Highlighting}
\end{Shaded}

To create a table called \texttt{TEST} with two columns - \texttt{ID} of type integer, and \texttt{NAME} of type varchar, we could create it using the following SQL statement:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{create} \KeywordTok{table}\NormalTok{ TEST(}
  \KeywordTok{ID} \DataTypeTok{int}
\NormalTok{  NAME }\DataTypeTok{varchar}\NormalTok{(}\DecValTok{30}\NormalTok{)}
\NormalTok{);}
\end{Highlighting}
\end{Shaded}

To create a table called \texttt{COUNTRY} with an \texttt{ID} column, a two letter country code column \texttt{CCODE}, and a variable length country name column \texttt{NAME}:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{create} \KeywordTok{table}\NormalTok{ COUNTRY(}
    \KeywordTok{ID} \DataTypeTok{int}\NormalTok{,}
\NormalTok{    CCODE }\DataTypeTok{char}\NormalTok{(}\DecValTok{2}\NormalTok{),}
\NormalTok{    NAME }\DataTypeTok{varchar}\NormalTok{(}\DecValTok{60}\NormalTok{)}
\NormalTok{);}
\end{Highlighting}
\end{Shaded}

Sometimes you may see additional keywords in a create table statement:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{create} \KeywordTok{table}\NormalTok{ COUNTRY(}
    \KeywordTok{ID} \DataTypeTok{int} \KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{    CCODE }\DataTypeTok{char}\NormalTok{(}\DecValTok{2}\NormalTok{),}
\NormalTok{    NAME }\DataTypeTok{varchar}\NormalTok{(}\DecValTok{60}\NormalTok{),}
    \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{(}\KeywordTok{ID}\NormalTok{)}
\NormalTok{);}
\end{Highlighting}
\end{Shaded}

\begin{itemize}
\item
  In the above example the \texttt{ID} column has the {\textbf{\texttt{NOT\ NULL}}} constraint added after the datatype - meaning that \emph{it cannot contain a NULL or an empty value}.
\item
  If you look at the last row in the create table statement above you will note that we are using \texttt{ID} as a {\textbf{Primary Key}} and the database \textbf{does not allow} Primary Keys to have \textbf{\texttt{NULL}} values. \emph{A Primary Key is a unique identifier in a table, and using Primary Keys can help speed up your queries significantly}.
\item
  If the table you are trying to create already exists in the database, you will get an error indicating table \texttt{XXX.YYY} already exists. To circumvent this error, either create a table with a different name or first \texttt{DROP} the existing table. It is quite common to issue a \texttt{DROP} before doing a \texttt{CREATE} in test and development scenarios.
\end{itemize}

\hypertarget{drop}{%
\section{DROP}\label{drop}}

The general syntax to drop a table:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{drop} \KeywordTok{table}\NormalTok{ TABLENAME;}
\end{Highlighting}
\end{Shaded}

For example, to drop the table COUNTRY, we can use the following code:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{drop} \KeywordTok{table}\NormalTok{ COUNTRY;}
\end{Highlighting}
\end{Shaded}

\hypertarget{alter}{%
\section{ALTER}\label{alter}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ table\_name}
\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ column\_name data\_type column\_constraint;}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ table\_name}
\KeywordTok{DROP} \KeywordTok{COLUMN}\NormalTok{ column\_name;}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ table\_name}
\KeywordTok{ALTER} \KeywordTok{COLUMN}\NormalTok{ column\_name }\KeywordTok{SET} \KeywordTok{DATA} \KeywordTok{TYPE}\NormalTok{ data\_type;}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ table\_name}
\KeywordTok{RENAME} \KeywordTok{COLUMN}\NormalTok{ current\_column\_name }\KeywordTok{TO}\NormalTok{ new\_column\_name;}
\end{Highlighting}
\end{Shaded}

\hypertarget{truncate}{%
\section{TRUNCATE}\label{truncate}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{TRUNCATE} \KeywordTok{TABLE}\NormalTok{ table\_name;}
\end{Highlighting}
\end{Shaded}

\hypertarget{guided-exercise-create-table-and-insert-data}{%
\section{Guided Exercise: Create table and insert data}\label{guided-exercise-create-table-and-insert-data}}

You will to create two tables

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \texttt{PETSALE}
\item
  \texttt{PET}.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ PETSALE (}
    \KeywordTok{ID} \DataTypeTok{INTEGER} \KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{    PET }\DataTypeTok{CHAR}\NormalTok{(}\DecValTok{20}\NormalTok{),}
\NormalTok{    SALEPRICE }\DataTypeTok{DECIMAL}\NormalTok{(}\DecValTok{6}\NormalTok{,}\DecValTok{2}\NormalTok{),}
\NormalTok{    PROFIT }\DataTypeTok{DECIMAL}\NormalTok{(}\DecValTok{6}\NormalTok{,}\DecValTok{2}\NormalTok{),}
\NormalTok{    SALEDATE }\DataTypeTok{DATE}
\NormalTok{    );}
    
\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ PET (}
    \KeywordTok{ID} \DataTypeTok{INTEGER} \KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{    ANIMAL }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{20}\NormalTok{),}
\NormalTok{    QUANTITY }\DataTypeTok{INTEGER}
\NormalTok{    );}
\end{Highlighting}
\end{Shaded}

{\emph{Now insert some records into the two newly created tables and show all the records of the two tables. }}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{INSERT} \KeywordTok{INTO}\NormalTok{ PETSALE }\KeywordTok{VALUES}
\NormalTok{    (}\DecValTok{1}\NormalTok{,}\StringTok{\textquotesingle{}Cat\textquotesingle{}}\NormalTok{,}\FloatTok{450.09}\NormalTok{,}\FloatTok{100.47}\NormalTok{,}\StringTok{\textquotesingle{}2018{-}05{-}29\textquotesingle{}}\NormalTok{),}
\NormalTok{    (}\DecValTok{2}\NormalTok{,}\StringTok{\textquotesingle{}Dog\textquotesingle{}}\NormalTok{,}\FloatTok{666.66}\NormalTok{,}\FloatTok{150.76}\NormalTok{,}\StringTok{\textquotesingle{}2018{-}06{-}01\textquotesingle{}}\NormalTok{),}
\NormalTok{    (}\DecValTok{3}\NormalTok{,}\StringTok{\textquotesingle{}Parrot\textquotesingle{}}\NormalTok{,}\FloatTok{50.00}\NormalTok{,}\FloatTok{8.9}\NormalTok{,}\StringTok{\textquotesingle{}2018{-}06{-}04\textquotesingle{}}\NormalTok{),}
\NormalTok{    (}\DecValTok{4}\NormalTok{,}\StringTok{\textquotesingle{}Hamster\textquotesingle{}}\NormalTok{,}\FloatTok{60.60}\NormalTok{,}\DecValTok{12}\NormalTok{,}\StringTok{\textquotesingle{}2018{-}06{-}11\textquotesingle{}}\NormalTok{),}
\NormalTok{    (}\DecValTok{5}\NormalTok{,}\StringTok{\textquotesingle{}Goldfish\textquotesingle{}}\NormalTok{,}\FloatTok{48.48}\NormalTok{,}\FloatTok{3.5}\NormalTok{,}\StringTok{\textquotesingle{}2018{-}06{-}14\textquotesingle{}}\NormalTok{);}
    
\KeywordTok{INSERT} \KeywordTok{INTO}\NormalTok{ PET }\KeywordTok{VALUES}
\NormalTok{    (}\DecValTok{1}\NormalTok{,}\StringTok{\textquotesingle{}Cat\textquotesingle{}}\NormalTok{,}\DecValTok{3}\NormalTok{),}
\NormalTok{    (}\DecValTok{2}\NormalTok{,}\StringTok{\textquotesingle{}Dog\textquotesingle{}}\NormalTok{,}\DecValTok{4}\NormalTok{),}
\NormalTok{    (}\DecValTok{3}\NormalTok{,}\StringTok{\textquotesingle{}Hamster\textquotesingle{}}\NormalTok{,}\DecValTok{2}\NormalTok{);}
    
\KeywordTok{SELECT} \OperatorTok{*} \KeywordTok{FROM}\NormalTok{ PETSALE;}
\KeywordTok{SELECT} \OperatorTok{*} \KeywordTok{FROM}\NormalTok{ PET;}
\end{Highlighting}
\end{Shaded}

\hypertarget{guided-exercise-use-the-alter-statement-to-add-delete-or-modify-columns-in-two-of-the-existing-tables-created-in-the-previous-exercise.}{%
\section{\texorpdfstring{Guided Exercise: Use the \texttt{ALTER} statement to add, delete, or modify columns in two of the existing tables created in the previous exercise.}{Guided Exercise: Use the ALTER statement to add, delete, or modify columns in two of the existing tables created in the previous exercise.}}\label{guided-exercise-use-the-alter-statement-to-add-delete-or-modify-columns-in-two-of-the-existing-tables-created-in-the-previous-exercise.}}

{\emph{Add a new \texttt{QUANTITY} column to the \texttt{PETSALE} table and show the altered table.}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ PETSALE}
\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ QUANTITY }\DataTypeTok{INTEGER}\NormalTok{;}

\KeywordTok{SELECT} \OperatorTok{*} \KeywordTok{FROM}\NormalTok{ PETSALE;}
\end{Highlighting}
\end{Shaded}

{\emph{Now update the newly added \texttt{QUANTITY} column of the \texttt{PETSALE} table with some values and show all the records of the table.
}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{UPDATE}\NormalTok{ PETSALE }\KeywordTok{SET}\NormalTok{ QUANTITY }\OperatorTok{=} \DecValTok{9} \KeywordTok{WHERE} \KeywordTok{ID} \OperatorTok{=} \DecValTok{1}\NormalTok{;}
\KeywordTok{UPDATE}\NormalTok{ PETSALE }\KeywordTok{SET}\NormalTok{ QUANTITY }\OperatorTok{=} \DecValTok{3} \KeywordTok{WHERE} \KeywordTok{ID} \OperatorTok{=} \DecValTok{2}\NormalTok{;}
\KeywordTok{UPDATE}\NormalTok{ PETSALE }\KeywordTok{SET}\NormalTok{ QUANTITY }\OperatorTok{=} \DecValTok{2} \KeywordTok{WHERE} \KeywordTok{ID} \OperatorTok{=} \DecValTok{3}\NormalTok{;}
\KeywordTok{UPDATE}\NormalTok{ PETSALE }\KeywordTok{SET}\NormalTok{ QUANTITY }\OperatorTok{=} \DecValTok{6} \KeywordTok{WHERE} \KeywordTok{ID} \OperatorTok{=} \DecValTok{4}\NormalTok{;}
\KeywordTok{UPDATE}\NormalTok{ PETSALE }\KeywordTok{SET}\NormalTok{ QUANTITY }\OperatorTok{=} \DecValTok{24} \KeywordTok{WHERE} \KeywordTok{ID} \OperatorTok{=} \DecValTok{5}\NormalTok{;}

\KeywordTok{SELECT} \OperatorTok{*} \KeywordTok{FROM}\NormalTok{ PETSALE;}
\end{Highlighting}
\end{Shaded}

{\emph{Delete the \texttt{PROFIT} column from the \texttt{PETSALE} table and show the altered table.
}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ PETSALE}
\KeywordTok{DROP} \KeywordTok{COLUMN}\NormalTok{ PROFIT;}

\KeywordTok{SELECT} \OperatorTok{*} \KeywordTok{FROM}\NormalTok{ PETSALE;}
\end{Highlighting}
\end{Shaded}

{\emph{Change the data type to \texttt{VARCHAR(20)} type of the column \texttt{PET} of the table \texttt{PETSALE} and show the altered table.
}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ PETSALE}
\KeywordTok{ALTER} \KeywordTok{COLUMN}\NormalTok{ PET }\KeywordTok{SET} \KeywordTok{DATA} \KeywordTok{TYPE} \DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{20}\NormalTok{);}

\KeywordTok{SELECT} \OperatorTok{*} \KeywordTok{FROM}\NormalTok{ PETSALE;}
\end{Highlighting}
\end{Shaded}

If you are using IBM db2:
Now verify if the data type of the column PET of the table PETSALE changed to \texttt{VARCHAR(20)} type or not. Click on the 3 bar menu icon in the top left corner and click Explore \textgreater{} Tables. Find the \texttt{PETSALE} table from Schemas by clicking Select All. Click on the \texttt{PETSALE} table to open the Table Definition page of the table. Here, you can see all the current data type of the columns of the \texttt{PETSALE} table.

{\emph{Rename the column PET to ANIMAL of the PETSALE table and show the altered table.
}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ PETSALE}
\KeywordTok{RENAME} \KeywordTok{COLUMN}\NormalTok{ PET }\KeywordTok{TO}\NormalTok{ ANIMAL;}

\KeywordTok{SELECT} \OperatorTok{*} \KeywordTok{FROM}\NormalTok{ PETSALE;}
\end{Highlighting}
\end{Shaded}

\hypertarget{guided-exercise-truncate}{%
\section{Guided Exercise: TRUNCATE}\label{guided-exercise-truncate}}

In this exercise, you will use the \texttt{TRUNCATE} statement to remove all rows from an existing table created in exercise 1 without deleting the table itself.

{\emph{Remove all rows from the PET table and show the empty table.
}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{TRUNCATE} \KeywordTok{TABLE}\NormalTok{ PET }\KeywordTok{IMMEDIATE}\NormalTok{;}
\KeywordTok{SELECT} \OperatorTok{*} \KeywordTok{FROM}\NormalTok{ PET;}
\end{Highlighting}
\end{Shaded}

\hypertarget{guided-exercise-drop}{%
\section{Guided Exercise: DROP}\label{guided-exercise-drop}}

In this exercise, you will use the \texttt{DROP} statement to delete an existing table created in the previous exercise.

{\emph{Delete the PET table and verify if the table still exists or not (SELECT statement won't work if a table doesn't exist).
}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{DROP} \KeywordTok{TABLE}\NormalTok{ PET;}
\KeywordTok{SELECT} \OperatorTok{*} \KeywordTok{FROM}\NormalTok{ PET;}
\end{Highlighting}
\end{Shaded}


  \bibliography{book.bib,packages.bib}

\end{document}
